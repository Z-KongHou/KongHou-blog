---
title: 初识 Electron
date: 2025-11-15 14:46:08
tags: ['Electron']
category: ['Electron']
---

# Electron 初体验：构建跨平台桌面应用的强大框架

在 Electron 的世界里，不同进程各司其职，通过 IPC（进程间通信）协同工作，共同构建出一个既安全又功能强大的桌面应用系统。整个通信架构可以简化为以下三个核心角色：

## 1. Renderer Process：UI 的前端展示层（渲染进程）

### 核心特点

- 本质上是运行在 Chromium 中的网页：HTML + CSS + JS 用来构建界面（可使用 React、Vue、Svelte 等现代前端框架）
- 默认处于安全模式：无法直接访问 Node.js API
- 所有系统调用必须通过 Preload 中间层进行请求

### 在通信链路中的职责

- 发起请求（使用 `ipcRenderer.invoke` / `send`）
- 接收主进程的事件通知（使用 `ipcRenderer.on`）
- 只处理 UI 相关逻辑，不涉及文件系统、OS 操作等底层功能
- **简而言之：渲染进程负责展示，不负责"能力"**

## 2. Main Process：系统能力的后台核心（主进程）

### 核心特点

- Electron 应用的入口点，是整个程序的控制中心
- 运行在 Node.js 环境中，拥有完整的系统能力：
  - 文件系统（fs）
  - 进程管理（child_process）
  - 系统菜单
  - 窗口管理
  - Tray、Notification 等桌面特性

### 在通信链路中的职责

- 接收渲染进程发来的请求，并执行相应的系统操作
- 主动向渲染进程推送事件，如下载进度、状态更新等
- 作为"系统 API 调度中心"：
  - `ipcMain.handle()` → 处理渲染层的异步请求
  - `ipcMain.on()` → 接收普通事件
  - `webContents.send()` → 主动推送事件给页面

## 3. Native APIs：系统级任务的执行底层

Electron 并非自己实现所有系统功能，而是依赖以下能力：

### Node.js 内置能力

- `fs`：文件读写
- `path`：路径处理
- `os`：系统信息
- `child_process`：执行命令

### Chromium 内置能力

- 渲染 UI
- 提供浏览器环境

### Electron 提供的桌面能力

- `BrowserWindow`：窗口管理
- `Tray`：系统托盘
- `Menu`：菜单系统
- `Notification`：系统通知
- `dialog`：系统对话框

Native APIs 的职责非常明确：哪里需要系统能力，Main Process 就调用相应的 Node/Electron API。渲染层永远不会直接接触这些底层能力。

## 三者关系与通信流程

> **一句话总结三者关系：**
>
> - **Renderer**：提出需求 → "我要读文件"、"我要最小化窗口"
> - **Main**：判断请求合法性 → 调用系统 API 执行操作
> - **Native APIs**：完成实际任务 → 将结果返回给主进程

### 最终通信链路

```
Renderer → Preload → Main → Native APIs

Renderer Process 负责 UI，只能做界面和业务展示，不能越权访问系统。

Main Process 负责系统能力，是渲染层与操作系统之间的安全中转站。

Native APIs 负责真正执行文件、系统、窗口等底层操作。

三者通过 IPC 严格分层协作，既保证了 Electron 的系统能力，又保证了安全性。
```
